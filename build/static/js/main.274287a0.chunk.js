(this["webpackJsonpchat-msg"]=this["webpackJsonpchat-msg"]||[]).push([[1],{20:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i}));var c=n(23),a=c.a.initializeApp({apiKey:"AIzaSyBd_-tFL3K-4yue4Nq7oKTZhKyQq8IaRWw",authDomain:"chat-msg-a79b2.firebaseapp.com",projectId:"chat-msg-a79b2",storageBucket:"chat-msg-a79b2.appspot.com",messagingSenderId:"409282767250",appId:"1:409282767250:web:aa7b2da5f37420a721b94b"}),r=a.auth(),u=a.firestore(),i=new c.a.auth.GoogleAuthProvider},21:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i}));var c=n(9),a=function(e){return{type:c.e,data:e}},r=function(){return{type:c.b}},u=function(e){return{type:c.d,users:e}},i=function(){return{type:c.a}}},33:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s}));var c=n(9),a=function(e){return{type:c.i,friendData:e}},r=function(e){return{type:c.c,allMsg:e}},u=function(e){return{type:c.f,value:e}},i=function(e){return{type:c.g,value:e}},s=function(){return{type:c.h}}},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(25),u=n.n(r),i=(n(41),n(42),n(18)),s=(n(43),n(4));var o=function(){return Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)(i.b,{to:"/",children:Object(s.jsx)("img",{src:"chat-icon.jpg",alt:"chat-logo"})})})},d=n(17),l=n(20),b=n(21),f=n(33);var j=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user.user}));return Object(s.jsxs)("div",{className:"navbar",children:[Object(s.jsx)(o,{}),null!==t&&Object(s.jsx)("div",{className:"name",children:t.displayName}),Object(s.jsx)("div",{className:"links",children:null!==t?Object(s.jsx)("button",{onClick:function(){l.a.signOut().then((function(){l.b.collection("users").doc(t.uid).update({isOnline:!1}).then((function(){e(Object(b.b)()),e(Object(b.a)()),e(Object(f.d)())}))})).catch((function(e){return alert(e.message)}))},children:"Logout"}):Object(s.jsx)(i.b,{to:"/",children:"Login"})})]})},h=n(11);n(53);var O=function(e){var t=e.size;return Object(s.jsx)("div",{className:"loader",children:Object(s.jsxs)("div",{className:"sk-folding-cube",style:{width:t,height:t},children:[Object(s.jsx)("div",{className:"sk-cube1 sk-cube"}),Object(s.jsx)("div",{className:"sk-cube2 sk-cube"}),Object(s.jsx)("div",{className:"sk-cube4 sk-cube"}),Object(s.jsx)("div",{className:"sk-cube3 sk-cube"})]})})},m=n(23),p=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(7)]).then(n.bind(null,105))})),g=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(5)]).then(n.bind(null,110))}));var v=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user.user}));return Object(c.useEffect)((function(){var t=l.a.onAuthStateChanged((function(n){return n&&l.b.collection("users").doc(n.uid).set({name:n.displayName,photoURL:n.photoURL,isOnline:!0,email:n.email,time:m.a.firestore.FieldValue.serverTimestamp(),uid:n.uid}).then((function(){e(Object(b.d)({uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL}))})).then((function(){l.b.collection("users").onSnapshot((function(t){var n=[];t.forEach((function(e){return n.push(e.data())})),e(Object(b.c)(n))}))})).catch((function(e){return alert(e.message)})),function(){return t}}))}),[]),Object(s.jsxs)("div",{className:"App",children:[null!==t?Object(s.jsx)(h.a,{to:"/main"}):Object(s.jsx)(h.a,{to:"/"}),Object(s.jsx)(j,{}),Object(s.jsx)(c.Suspense,{fallback:Object(s.jsx)(O,{color:"#1976d2",size:100}),children:Object(s.jsxs)(h.d,{children:[Object(s.jsx)(h.b,{path:"/",component:p,exact:!0}),Object(s.jsx)(h.b,{path:"/main",component:g})]})})]})},S=function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,108)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,u=t.getTTFB;n(e),c(e),a(e),r(e),u(e)}))},x=n(28),y=n(10),I=n(9),E={startChat:!1,friendInfo:{friendId:"",friendName:"",friendImage:""},allMessages:[],IsScreenSmallSize:!1,openChat:!1},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.i:return Object(y.a)(Object(y.a)({},e),{},{startChat:!0,friendInfo:{friendId:t.friendData.id,friendName:t.friendData.name,friendImage:t.friendData.image}});case I.c:return Object(y.a)(Object(y.a)({},e),{},{allMessages:t.allMsg});case I.f:var n="boolean"===typeof t.value?t.value:t.value<500;return Object(y.a)(Object(y.a)({},e),{},{IsScreenSmallSize:n});case I.g:return Object(y.a)(Object(y.a)({},e),{},{openChat:t.value});case I.h:return Object(y.a)(Object(y.a)({},e),{},{startChat:!1,friendInfo:{friendId:"",friendName:"",friendImage:""},allMessages:[],IsScreenSmallSize:!1,openChat:!1});default:return Object(y.a)({},e)}},L={user:null,allUsers:[]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.e:return Object(y.a)(Object(y.a)({},e),{},{user:t.data});case I.b:return Object(y.a)(Object(y.a)({},e),{},{user:null});case I.d:var n=e.user?t.users.filter((function(t){return t.uid!==e.user.uid})):[];return Object(y.a)(Object(y.a)({},e),{},{allUsers:n});case I.a:return Object(y.a)(Object(y.a)({},e),{},{allUsers:[]});default:return Object(y.a)({},e)}},_=Object(x.b)({chat:N,user:T}),k=Object(x.c)(_,Object(x.a)());u.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(i.a,{children:Object(s.jsx)(d.a,{store:k,children:Object(s.jsx)(v,{})})})}),document.getElementById("root")),S()},9:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return l}));var c="GET_USER_DETAILS",a="EMPTY_USER",r="GET_ALL_USERS",u="EMPTY_ALL_USERS",i="START_CHAT",s="GET_ALL_MESSAGES",o="RESET_CHAT_SETTING",d="IS_SCREEN_SMALL_SIZE",l="OPEN_CHAT"}},[[54,2,3]]]);
//# sourceMappingURL=main.274287a0.chunk.js.map