{"version":3,"sources":["Container/Login/Login.js"],"names":["Login","dispatch","useDispatch","clickHandler","a","auth","signInWithPopup","googleProvider","then","user","db","collection","doc","uid","set","name","displayName","photoURL","isOnline","email","time","firebase","firestore","FieldValue","serverTimestamp","getUserDetails","onSnapshot","querySnapshot","users","forEach","push","data","getAllUsers","catch","error","alert","message","className","onClick","src","alt"],"mappings":"qNAwDeA,UAhDf,WACI,IAAMC,EAAWC,cAEXC,EAAY,uCAAG,sBAAAC,EAAA,sEACXC,IAAKC,gBAAgBC,KAC1BC,MAAK,YAAe,IAAZC,EAAW,EAAXA,KASL,OARAC,IAAGC,WAAW,SAASC,IAAIH,EAAKI,KAAKC,IAAI,CACrCC,KAAMN,EAAKO,YACXC,SAAUR,EAAKQ,SACfC,UAAU,EACVC,MAAOV,EAAKU,MACZC,KAAMC,IAASC,UAAUC,WAAWC,kBACpCX,IAAKJ,EAAKI,MAEPJ,KAEVD,MAAK,SAACC,GACHR,EAASwB,YAAe,aACpBZ,IAAKJ,EAAKI,IACVM,MAAOV,EAAKU,MACZH,YAAaP,EAAKO,YAClBC,SAAUR,EAAKQ,UAJI,MAKdR,EAAKI,UAGjBL,MAAK,WACFE,IAAGC,WAAW,SACbe,YAAW,SAACC,GACT,IAAIC,EAAQ,GACZD,EAAcE,SAAQ,SAAAjB,GAAG,OAAIgB,EAAME,KAAKlB,EAAImB,WAC5C9B,EAAS+B,YAAYJ,UAG5BK,OAAM,SAAAC,GAAK,OAAIC,MAAMD,EAAME,YA9BX,2CAAH,qDAiClB,OACI,qBAAKC,UAAU,QAAf,SACI,qBAAKA,UAAU,YAAf,SACI,eAAC,IAAD,CAAYC,QAASnC,EAArB,UACI,sBAAMkC,UAAU,OAAhB,0BACA,qBAAKE,IAA8B,aAAcC,IAAI,yB","file":"static/js/7.4a2dac29.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Login.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { auth, googleProvider, db } from '../../firebase';\r\nimport { getUserDetails, getAllUsers } from '../../store/actions/userActions';\r\nimport { useDispatch } from 'react-redux';\r\nimport firebase from 'firebase';\r\n\r\nfunction Login() {\r\n    const dispatch = useDispatch();\r\n    \r\n    const clickHandler = async () => {\r\n        await auth.signInWithPopup(googleProvider)\r\n        .then(({ user }) => {\r\n            db.collection('users').doc(user.uid).set({\r\n                name: user.displayName,\r\n                photoURL: user.photoURL,\r\n                isOnline: true,\r\n                email: user.email,\r\n                time: firebase.firestore.FieldValue.serverTimestamp(),\r\n                uid: user.uid\r\n            })\r\n            return user;\r\n        })\r\n        .then((user) => {\r\n            dispatch(getUserDetails({\r\n                uid: user.uid,\r\n                email: user.email,\r\n                displayName: user.displayName,\r\n                photoURL: user.photoURL,\r\n                uid: user.uid\r\n            }))\r\n        })\r\n        .then(() => {\r\n            db.collection(\"users\")\r\n            .onSnapshot((querySnapshot) => {\r\n                let users = [];\r\n                querySnapshot.forEach(doc => users.push(doc.data()));\r\n                dispatch(getAllUsers(users))\r\n            })\r\n        })\r\n        .catch(error => alert(error.message))\r\n    }\r\n\r\n    return (\r\n        <div className='login'>\r\n            <div className=\"login_btn\">\r\n                <IconButton onClick={clickHandler}>\r\n                    <span className='text'>sign in with</span>\r\n                    <img src={process.env.PUBLIC_URL + 'google.png'} alt=\"google icon\" />\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n"],"sourceRoot":""}